<!DOCTYPE html ><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/><title></title><meta content="" name="description"/><meta content="" name="keywords"/><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link href="../../../../../lib/index.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../../../lib/template.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../../../lib/print.css" media="print" type="text/css" rel="stylesheet"/><link href="../../../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css"/><script type="text/javascript" src="../../../../../lib/jquery.min.js"></script><script type="text/javascript" src="../../../../../lib/index.js"></script><script type="text/javascript" src="../../../../../index.js"></script><script type="text/javascript" src="../../../../../lib/scheduler.js"></script><script type="text/javascript" src="../../../../../lib/template.js"></script><script type="text/javascript">/* this variable can be used by the JS to determine the path to the root document */
var toRoot = '../../../../../';</script></head><body><div id="search"><span id="doc-title"><span id="doc-version"></span></span> <span class="close-results"><span class="left">&lt;</span> Back</span><div id="textfilter"><span class="input"><input autocapitalize="none" placeholder="Search" id="index-input" type="text" accesskey="/"/><i class="clear material-icons"></i><i id="search-icon" class="material-icons"></i></span></div></div><div id="search-results"><div id="search-progress"><div id="progress-fill"></div></div><div id="results-content"><div id="entity-results"></div><div id="member-results"></div></div></div><div id="content-scroll-container" style="-webkit-overflow-scrolling: touch;"><div id="content-container" style="-webkit-overflow-scrolling: touch;"><div id="subpackage-spacer"><div id="packages"><h1>Packages</h1><ul><li class="indented0 " name="_root_.root" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="_root_" class="anchorToMember"></a><a id="root:_root_" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../../../index.html" title=""><span class="name">root</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented1 " name="_root_.com" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="com" class="anchorToMember"></a><a id="com:com" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../../index.html" title=""><span class="name">com</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented2 " name="com.twitter" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="twitter" class="anchorToMember"></a><a id="twitter:twitter" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../index.html" title="Start with com.twitter.finagle."><span class="name">twitter</span></a></span><p class="shortcomment cmt">Start with <a href="../../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">com.twitter.finagle</a>.</p><div class="fullcomment"><div class="comment cmt"><p>Start with <a href="../../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">com.twitter.finagle</a>.</p></div><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../../index.html" name="com" id="com" class="extype">com</a></dd></dl></div></li><li class="indented3 " name="com.twitter.finagle" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="finagle" class="anchorToMember"></a><a id="finagle:finagle" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../index.html" title="Finagle is an extensible RPC system."><span class="name">finagle</span></a></span><p class="shortcomment cmt">Finagle is an extensible RPC system.</p><div class="fullcomment"><div class="comment cmt"><p>Finagle is an extensible RPC system.</p><p>Services are represented by class <a href="../../Service.html" name="com.twitter.finagle.Service" id="com.twitter.finagle.Service" class="extype">com.twitter.finagle.Service</a>. Clients make use of
<a href="../../Service.html" name="com.twitter.finagle.Service" id="com.twitter.finagle.Service" class="extype">com.twitter.finagle.Service</a> objects while servers implement them.</p><p>Finagle contains a number of protocol implementations; each of these implement
<a href="../../Client.html" name="com.twitter.finagle.Client" id="com.twitter.finagle.Client" class="extype">Client</a> and/or <a href="../../Server.html" name="com.twitter.finagle.Server" id="com.twitter.finagle.Server" class="extype">com.twitter.finagle.Server</a>. For example, Finagle's
HTTP implementation, <a href="../../Http$.html" name="com.twitter.finagle.Http" id="com.twitter.finagle.Http" class="extype">com.twitter.finagle.Http</a> (in package <code>finagle-http</code>), exposes both.</p><p>Thus a simple HTTP server is built like this:</p><pre><span class="kw">import</span> com.twitter.finagle.{Http, Service}
<span class="kw">import</span> com.twitter.finagle.http.{Request, Response}
<span class="kw">import</span> com.twitter.util.{Await, Future}

<span class="kw">val</span> service = <span class="kw">new</span> Service[Request, Response] {
  <span class="kw">def</span> apply(req: Request): Future[Response] =
    Future.value(Response())
}
<span class="kw">val</span> server = Http.server.serve(<span class="lit">":8080"</span>, service)
Await.ready(server)</pre><p>We first define a service to which requests are dispatched. In this case, the service returns
immediately with a HTTP 200 OK response, and with no content.</p><p>This service is then served via the Http protocol on TCP port 8080. Finally we wait for the server
to stop serving.</p><p>We can now query our web server:</p><pre>% curl -D - localhost:<span class="num">8080</span>
HTTP/<span class="num">1.1</span> <span class="num">200</span> OK</pre><p>Building an HTTP client is also simple. (Note that type annotations are added for illustration.)</p><pre><span class="kw">import</span> com.twitter.finagle.{Http, Service}
<span class="kw">import</span> com.twitter.finagle.http.{Request, Response}
<span class="kw">import</span> com.twitter.util.{Future, Return, Throw}

<span class="kw">val</span> client: Service[Request, Response] = Http.client.newService(<span class="lit">"localhost:8080"</span>)
<span class="kw">val</span> f: Future[Response] = client(Request()).respond {
  <span class="kw">case</span> Return(rep) <span class="kw">=&gt;</span>
    printf(<span class="lit">"Got HTTP response %s\n"</span>, rep)
  <span class="kw">case</span> Throw(exc) <span class="kw">=&gt;</span>
    printf(<span class="lit">"Got error %s\n"</span>, exc)
}</pre><p><code>Http.client.newService("localhost:8080")</code> constructs a new <a href="../../Service.html" name="com.twitter.finagle.Service" id="com.twitter.finagle.Service" class="extype">com.twitter.finagle.Service</a> instance
connected to localhost TCP port 8080. We then issue a HTTP/1.1 GET request to URI "/". The service
returns a <a href="https://twitter.github.io/util/docs/com/twitter/util/Future.html" name="com.twitter.util.Future" id="com.twitter.util.Future" class="extype">com.twitter.util.Future</a> representing the result of the operation. We listen to this
future, printing an appropriate message when the response arrives.</p><p>The <a href="https://twitter.github.io/finagle/" target="_blank">Finagle homepage</a> contains useful documentation and
resources for using Finagle.
</p></div><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../index.html" name="com.twitter" id="com.twitter" class="extype">twitter</a></dd></dl></div></li><li class="indented4 " name="com.twitter.finagle.postgresql" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="postgresql" class="anchorToMember"></a><a id="postgresql:postgresql" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../index.html" title=""><span class="name">postgresql</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">finagle</a></dd></dl></div></li><li class="indented5 current" name="com.twitter.finagle.postgresql.machine" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="machine" class="anchorToMember"></a><a id="machine:machine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">machine</span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="com.twitter.finagle.postgresql" id="com.twitter.finagle.postgresql" class="extype">postgresql</a></dd></dl></div></li><li class="current-entities indented5"><span class="separator"></span> <a href="CloseMachine.html" title="Implements a simple machine for closing a prepared statement or a portal." class="class"></a><a href="CloseMachine.html" title="Implements a simple machine for closing a prepared statement or a portal.">CloseMachine</a></li><li class="current-entities indented5"><a href="ExecuteMachine$.html" title="" class="object"></a> <a href="ExecuteMachine.html" title="Implements part of the &quot;Extended Query&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY." class="class"></a><a href="ExecuteMachine.html" title="Implements part of the &quot;Extended Query&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY.">ExecuteMachine</a></li><li class="current-entities indented5"><span class="separator"></span> <a href="HandshakeMachine.html" title="Implements the &quot;Start-up&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.3" class="class"></a><a href="HandshakeMachine.html" title="Implements the &quot;Start-up&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.3">HandshakeMachine</a></li><li class="current-entities indented5"><span class="separator"></span> <a href="PrepareMachine.html" title="Implements part of the &quot;Extended Query&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY." class="class"></a><a href="PrepareMachine.html" title="Implements part of the &quot;Extended Query&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY.">PrepareMachine</a></li><li class="current-entities indented5"><span class="separator"></span> <a href="Runner.html" title="The runner connects state machines to a connection and allows dispatching machines on the connection." class="class"></a><a href="Runner.html" title="The runner connects state machines to a connection and allows dispatching machines on the connection.">Runner</a></li><li class="current-entities indented5"><span class="separator"></span> <a href="SimpleQueryMachine.html" title="Implements the &quot;Simple Query&quot; flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.4" class="class"></a><a href="SimpleQueryMachine.html" title="Implements the &quot;Simple Query&quot; flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.4">SimpleQueryMachine</a></li><li class="current-entities indented5"><a href="StateMachine$.html" title="" class="object"></a> <a href="StateMachine.html" title="A StateMachine is responsible for managing the connection state and expose a Request =&gt; Future[Response] regardless of the number of actual request / response cycles required with a backend server." class="trait"></a><a href="StateMachine.html" title="A StateMachine is responsible for managing the connection state and expose a Request =&gt; Future[Response] regardless of the number of actual request / response cycles required with a backend server.">StateMachine</a></li><li class="indented5 " name="com.twitter.finagle.postgresql.transport" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="transport" class="anchorToMember"></a><a id="transport:transport" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/transport/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../transport/index.html" title=""><span class="name">transport</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="com.twitter.finagle.postgresql" id="com.twitter.finagle.postgresql" class="extype">postgresql</a></dd></dl></div></li><li class="indented5 " name="com.twitter.finagle.postgresql.types" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="types" class="anchorToMember"></a><a id="types:types" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/types/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../types/index.html" title=""><span class="name">types</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="com.twitter.finagle.postgresql" id="com.twitter.finagle.postgresql" class="extype">postgresql</a></dd></dl></div></li></ul></div></div><div id="content"><body class="package value"><div id="definition"><div class="big-circle package">p</div><p id="owner"><a href="../../../../index.html" name="com" id="com" class="extype">com</a>.<a href="../../../index.html" name="com.twitter" id="com.twitter" class="extype">twitter</a>.<a href="../../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">finagle</a>.<a href="../index.html" name="com.twitter.finagle.postgresql" id="com.twitter.finagle.postgresql" class="extype">postgresql</a></p><h1>machine<span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/index.html" title="Permalink"><i class="material-icons"></i></a></span></h1></div><h4 id="signature" class="signature"><span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">machine</span></span></h4><div id="comment" class="fullcommenttop"></div><div id="mbrsel"><div class="toggle"></div><div id="memberfilter"><i class="material-icons arrow"></i><span class="input"><input placeholder="Filter all members" id="mbrsel-input" type="text" accesskey="/"/></span><i class="clear material-icons"></i></div><div id="filterby"><div id="order"><span class="filtertype">Ordering</span><ol><li class="alpha in"><span>Alphabetic</span></li></ol></div><div id="visbl"><span class="filtertype">Visibility</span><ol><li class="public in"><span>Public</span></li><li class="protected out"><span>Protected</span></li></ol></div></div></div><div id="template"><div id="allMembers"><div id="types" class="types members"><h3>Type Members</h3><ol><li class="indented0 " name="com.twitter.finagle.postgresql.machine.CloseMachine" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="CloseMachineextendsStateMachine[com.twitter.finagle.postgresql.Response.Ready.type]" class="anchorToMember"></a><a id="CloseMachine:CloseMachine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/CloseMachine.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><a href="CloseMachine.html" title="Implements a simple machine for closing a prepared statement or a portal."><span class="name">CloseMachine</span></a><span class="result"> extends <a href="StateMachine.html" name="com.twitter.finagle.postgresql.machine.StateMachine" id="com.twitter.finagle.postgresql.machine.StateMachine" class="extype">StateMachine</a>[<a href="../Response$$Ready$.html" name="com.twitter.finagle.postgresql.Response.Ready" id="com.twitter.finagle.postgresql.Response.Ready" class="extype">Ready</a>.type]</span></span><p class="shortcomment cmt">Implements a simple machine for closing a prepared statement or a portal.</p></li><li class="indented0 " name="com.twitter.finagle.postgresql.machine.ExecuteMachine" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="ExecuteMachineextendsStateMachine[com.twitter.finagle.postgresql.Response.QueryResponse]" class="anchorToMember"></a><a id="ExecuteMachine:ExecuteMachine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/ExecuteMachine.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><a href="ExecuteMachine.html" title="Implements part of the &quot;Extended Query&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY."><span class="name">ExecuteMachine</span></a><span class="result"> extends <a href="StateMachine.html" name="com.twitter.finagle.postgresql.machine.StateMachine" id="com.twitter.finagle.postgresql.machine.StateMachine" class="extype">StateMachine</a>[<a href="../Response$$QueryResponse.html" name="com.twitter.finagle.postgresql.Response.QueryResponse" id="com.twitter.finagle.postgresql.Response.QueryResponse" class="extype">QueryResponse</a>]</span></span><p class="shortcomment cmt">Implements part of the "Extended Query" message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY.</p><div class="fullcomment"><div class="comment cmt"><p>Implements part of the "Extended Query" message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY.</p><p>This machine is used in combination with <a href="PrepareMachine.html" name="com.twitter.finagle.postgresql.machine.PrepareMachine" id="com.twitter.finagle.postgresql.machine.PrepareMachine" class="extype">PrepareMachine</a>. That is, before executing this machine, a prior
execution of <a href="PrepareMachine.html" name="com.twitter.finagle.postgresql.machine.PrepareMachine" id="com.twitter.finagle.postgresql.machine.PrepareMachine" class="extype">PrepareMachine</a> must have taken place.</p><p>NOTE: this machine is slightly different from other ones in that it will send multiple messages on start and then
a <span name="Flush" class="extype">Flush</span>. The reason is because the message flow is different in this case and the backend does not send
individual responses until the <span name="Flush" class="extype">Flush</span> is received. The machine expects responses to come back in order,
but it's not entirely clear if the backend is allowed to send them in a different order.</p><p>Also note that this machine is used for both executing a portal as well as resuming a previously executed one.
</p></div></div></li><li class="indented0 " name="com.twitter.finagle.postgresql.machine.HandshakeMachine" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="HandshakeMachineextendsStateMachine[com.twitter.finagle.postgresql.Response.ConnectionParameters]withProductwithSerializable" class="anchorToMember"></a><a id="HandshakeMachine:HandshakeMachine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/HandshakeMachine.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">case class</span></span> <span class="symbol"><a href="HandshakeMachine.html" title="Implements the &quot;Start-up&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.3"><span class="name">HandshakeMachine</span></a><span class="params">(<span name="credentials">credentials: <a href="../Params$$Credentials.html" name="com.twitter.finagle.postgresql.Params.Credentials" id="com.twitter.finagle.postgresql.Params.Credentials" class="extype">Credentials</a></span>, <span name="database">database: <a href="../Params$$Database.html" name="com.twitter.finagle.postgresql.Params.Database" id="com.twitter.finagle.postgresql.Params.Database" class="extype">Database</a></span>, <span name="statementTimeout">statementTimeout: <a href="../Params$$StatementTimeout.html" name="com.twitter.finagle.postgresql.Params.StatementTimeout" id="com.twitter.finagle.postgresql.Params.StatementTimeout" class="extype">StatementTimeout</a></span>, <span name="sessionDefaults">sessionDefaults: <a href="../Params$$SessionDefaults.html" name="com.twitter.finagle.postgresql.Params.SessionDefaults" id="com.twitter.finagle.postgresql.Params.SessionDefaults" class="extype">SessionDefaults</a></span>)</span><span class="result"> extends <a href="StateMachine.html" name="com.twitter.finagle.postgresql.machine.StateMachine" id="com.twitter.finagle.postgresql.machine.StateMachine" class="extype">StateMachine</a>[<a href="../Response$$ConnectionParameters.html" name="com.twitter.finagle.postgresql.Response.ConnectionParameters" id="com.twitter.finagle.postgresql.Response.ConnectionParameters" class="extype">ConnectionParameters</a>] with <a href="https://www.scala-lang.org/api/2.13.6/scala/Product.html#scala.Product" name="scala.Product" id="scala.Product" class="extype">Product</a> with <span name="scala.Serializable" class="extype">Serializable</span></span></span><p class="shortcomment cmt">Implements the "Start-up" message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.3</p><div class="fullcomment"><div class="comment cmt"><p>Implements the "Start-up" message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.3</p><p>This process involves authenticating the client and accumulating parameters about the server's configuration for this connection.
Failure to authenticate will produce an exception.
A successful response <a href="../Response$$ConnectionParameters.html" name="com.twitter.finagle.postgresql.Response.ConnectionParameters" id="com.twitter.finagle.postgresql.Response.ConnectionParameters" class="extype">Response.ConnectionParameters</a> which includes the connection's parameters
such as character encoding and timezone.
</p></div></div></li><li class="indented0 " name="com.twitter.finagle.postgresql.machine.PrepareMachine" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="PrepareMachineextendsStateMachine[com.twitter.finagle.postgresql.Response.ParseComplete]" class="anchorToMember"></a><a id="PrepareMachine:PrepareMachine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/PrepareMachine.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><a href="PrepareMachine.html" title="Implements part of the &quot;Extended Query&quot; message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY."><span class="name">PrepareMachine</span></a><span class="result"> extends <a href="StateMachine.html" name="com.twitter.finagle.postgresql.machine.StateMachine" id="com.twitter.finagle.postgresql.machine.StateMachine" class="extype">StateMachine</a>[<a href="../Response$$ParseComplete.html" name="com.twitter.finagle.postgresql.Response.ParseComplete" id="com.twitter.finagle.postgresql.Response.ParseComplete" class="extype">ParseComplete</a>]</span></span><p class="shortcomment cmt">Implements part of the "Extended Query" message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY.</p><div class="fullcomment"><div class="comment cmt"><p>Implements part of the "Extended Query" message flow described here https://www.postgresql.org/docs/current/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY.</p><p>This machine is used in combination with <a href="ExecuteMachine.html" name="com.twitter.finagle.postgresql.machine.ExecuteMachine" id="com.twitter.finagle.postgresql.machine.ExecuteMachine" class="extype">ExecuteMachine</a>. That is, after executing this machine,
an execution of <a href="ExecuteMachine.html" name="com.twitter.finagle.postgresql.machine.ExecuteMachine" id="com.twitter.finagle.postgresql.machine.ExecuteMachine" class="extype">ExecuteMachine</a> is required to obtain the results.
</p></div></div></li><li class="indented0 " name="com.twitter.finagle.postgresql.machine.Runner" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="RunnerextendsAnyRef" class="anchorToMember"></a><a id="Runner:Runner" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/Runner.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><a href="Runner.html" title="The runner connects state machines to a connection and allows dispatching machines on the connection."><span class="name">Runner</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span><p class="shortcomment cmt">The runner connects state machines to a connection and allows dispatching machines on the connection.</p></li><li class="indented0 " name="com.twitter.finagle.postgresql.machine.SimpleQueryMachine" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="SimpleQueryMachineextendsStateMachine[com.twitter.finagle.postgresql.Response.SimpleQueryResponse]" class="anchorToMember"></a><a id="SimpleQueryMachine:SimpleQueryMachine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/SimpleQueryMachine.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><a href="SimpleQueryMachine.html" title="Implements the &quot;Simple Query&quot; flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.4"><span class="name">SimpleQueryMachine</span></a><span class="result"> extends <a href="StateMachine.html" name="com.twitter.finagle.postgresql.machine.StateMachine" id="com.twitter.finagle.postgresql.machine.StateMachine" class="extype">StateMachine</a>[<a href="../Response$$SimpleQueryResponse.html" name="com.twitter.finagle.postgresql.Response.SimpleQueryResponse" id="com.twitter.finagle.postgresql.Response.SimpleQueryResponse" class="extype">SimpleQueryResponse</a>]</span></span><p class="shortcomment cmt">Implements the "Simple Query" flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.4</p><div class="fullcomment"><div class="comment cmt"><p>Implements the "Simple Query" flow described here https://www.postgresql.org/docs/current/protocol-flow.html#id-1.10.5.7.4</p><p>Note that the name is somewhat misleading since the flow is not particularly simple due to the fact that it supports
an arbitrary number of queries in a single message, i.e.: "multi-line queries".</p><p>For example, the client may send <code>CREATE TABLE (...); CREATE INDEX ...</code> in a single query. All types of queries
are supported.
</p></div></div></li><li class="indented0 " name="com.twitter.finagle.postgresql.machine.StateMachine" group="Ungrouped" fullComment="yes" data-isabs="true" visbl="pub"><a id="StateMachine[+R&lt;:com.twitter.finagle.postgresql.Response]extendsAnyRef" class="anchorToMember"></a><a id="StateMachine[+R&lt;:Response]:StateMachine[R]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/StateMachine.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="StateMachine.html" title="A StateMachine is responsible for managing the connection state and expose a Request =&gt; Future[Response] regardless of the number of actual request / response cycles required with a backend server."><span class="name">StateMachine</span></a><span class="tparams">[<span name="R">+R &lt;: <a href="../Response.html" name="com.twitter.finagle.postgresql.Response" id="com.twitter.finagle.postgresql.Response" class="extype">Response</a></span>]</span><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span><p class="shortcomment cmt">A <code>StateMachine</code> is responsible for managing the connection state and expose a <code>Request =&gt; Future[Response]</code> regardless
of the number of actual request / response cycles required with a backend server.</p><div class="fullcomment"><div class="comment cmt"><p>A <code>StateMachine</code> is responsible for managing the connection state and expose a <code>Request =&gt; Future[Response]</code> regardless
of the number of actual request / response cycles required with a backend server.</p><p>That is, for any particular client request / response cycle, multiple request / response cycles are usually required
with the postgresql backend. This requires coordinating state with the backend which is what is encapsulated in
<code>StateMachine</code> implementations.</p><p><code>StateMachine</code>s have a public type parameter to represent the response type that it will eventually produce.
They also have an internal type parameter to represent its internal state representation.</p><p><code>StateMachine</code> only encapsulates the state transitions, not the state itself, which must be maintained externally
(i.e.: in some kind of runner). That is, implementations provide a starting state and a way to transition to another
state. The "current state" must be maintained in whatever is encapsulating the connection
(specifically, in <a href="../ClientDispatcher.html" name="com.twitter.finagle.postgresql.ClientDispatcher" id="com.twitter.finagle.postgresql.ClientDispatcher" class="extype">com.twitter.finagle.postgresql.ClientDispatcher</a> for the finagle client.)</p><p><code>StateMachine</code>s are responsible for eventually producing the response to the client's request as well as eventually
reaching a completion state which leaves the connection ready for a new client request. Note that responding to the
client with the response does not necessarily occur at the same time the state machine completing. That is, the
client response may be produced while the state machine still exchanges messages with the backend on the connection.
</p></div><dl class="paramcmts block"><dt class="tparam">R</dt><dd class="cmt"><p>The type of client response eventually produced by the state machine implementation.</p></dd></dl><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p><a href="../ClientDispatcher.html" name="com.twitter.finagle.postgresql.ClientDispatcher" id="com.twitter.finagle.postgresql.ClientDispatcher" class="extype">com.twitter.finagle.postgresql.ClientDispatcher</a></p></span></dd></dl></div></li></ol></div><div class="values members"><h3>Value Members</h3><ol><li class="indented0 " name="com.twitter.finagle.postgresql.machine.ExecuteMachine" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="ExecuteMachine" class="anchorToMember"></a><a id="ExecuteMachine:ExecuteMachine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/ExecuteMachine$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="ExecuteMachine$.html" title=""><span class="name">ExecuteMachine</span></a></span></li><li class="indented0 " name="com.twitter.finagle.postgresql.machine.StateMachine" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="StateMachine" class="anchorToMember"></a><a id="StateMachine:StateMachine" class="anchorToMember"></a> <span class="permalink"><a href="../../../../../com/twitter/finagle/postgresql/machine/StateMachine$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="StateMachine$.html" title=""><span class="name">StateMachine</span></a></span></li></ol></div></div><div id="inheritedMembers"></div><div id="groupedMembers"><div name="Ungrouped" class="group"><h3>Ungrouped</h3></div></div></div><div id="tooltip"></div><div id="footer"></div></body></div></div></div></body></html>
